{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nlet currentQuery = '';\n\nasync function fetchImages(query, page = 1) {\n  currentQuery = query;\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '44613226-2c9c9ee480393e9e269050800',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 21,\n  });\n\n  try {\n    const { data } = await axios(`${BASE_URL}?${params}`);\n    const totalHits = data.totalHits;\n    if (totalHits === 0) {\n      urlError();\n    } else {\n      return data.hits;\n    }\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n\nconst optionsError = {\n  icon: '',\n  position: 'topRight',\n  messageColor: 'white',\n  close: false,\n  closeOnEscape: true,\n  closeOnClick: true,\n  displayMode: 'replace',\n};\n\nconst urlError = () =>\n  iziToast.error({\n    message:\n      'Sorry, there are no images matching your search query. Please, try again!',\n    backgroundColor: '#CB1E1E',\n    ...optionsError,\n  });\n\nconst showError = message =>\n  iziToast.error({\n    message: 'Please! Type something.',\n    backgroundColor: '#CB1E1E',\n    ...optionsError,\n  });\n\nconst endOfSearchResults = () =>\n  iziToast.error({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    backgroundColor: 'blue',\n    ...optionsError,\n  });\n\nexport { currentQuery, fetchImages, urlError, showError, endOfSearchResults };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages, currentQuery, endOfSearchResults } from './pixabay-api';\n\nlet lightbox;\nconst gallery = document.querySelector('.gallery');\nconst loadMore = document.querySelector('.js-load-more');\n\nfunction renderGallery(images) {\n  gallery.innerHTML = images.map(image => createImageCard(image)).join('');\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionDelay: 250,\n      captionsData: 'alt',\n    });\n  }\n  if (images.length > 0 && images.length < 14) {\n    loadMore.style.display = 'none';\n  } else {\n    loadMore.style.display = 'block';\n  }\n}\n\nfunction updateGallery(images) {\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    images.map(image => createImageCard(image)).join('')\n  );\n  if (lightbox) {\n    lightbox.refresh();\n  }\n}\n\nloadMore.addEventListener('click', onLoadMore);\n\nlet page = 1;\n\nasync function onLoadMore() {\n  if (!currentQuery) {\n    return;\n  }\n\n  page += 1;\n  showLoader();\n\n  try {\n    const images = await fetchImages(currentQuery, page);\n\n    if (!images || images.length === 0) {\n      hideLoader();\n      endOfSearchResults();\n      loadMore.style.display = 'none';\n      return;\n    }\n\n    updateGallery(images);\n\n    const lastCard = gallery.lastElementChild;\n    const cardHeight = lastCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.error(error.message);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction createImageCard(image) {\n  return `<li class=\"gallery-item\">\n          <div class=\"gallery-item-image\">\n          <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" /></a>\n          </div>\n          <ul class=\"image-details\">\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Likes</h2>\n              <p class=\"image-details-value\">${image.likes}</p>\n            </li>\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Views</h2>\n              <p class=\"image-details-value\">${image.views}</p>\n            </li>\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Comments</h2>\n              <p class=\"image-details-value\">${image.comments}</p>\n            </li>\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Downloads</h2>\n              <p class=\"image-details-value\">${image.downloads}</p>\n            </li>\n          </ul>\n        </li>`;\n}\n\nfunction showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nfunction clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport {\n  renderGallery,\n  updateGallery,\n  onLoadMore,\n  showLoader,\n  hideLoader,\n  clearGallery,\n};\n","import { fetchImages, showError } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  showLoader,\n  hideLoader,\n  clearGallery,\n} from './js/render-functions.js';\n\nconst searchForm = document.querySelector('.form');\nconst input = document.querySelector('.input');\nconst loadMore = document.querySelector('.js-load-more');\nloadMore.style.display = 'none';\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  clearGallery();\n  const query = input.value.trim();\n\n  if (query.length === 0) {\n    showError();\n    loadMore.style.display = 'none';\n    return;\n  }\n\n  showLoader();\n  input.value = '';\n\n  try {\n    const images = await fetchImages(query);\n    renderGallery(images);\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["currentQuery","fetchImages","query","page","BASE_URL","params","data","axios","urlError","error","optionsError","iziToast","showError","message","endOfSearchResults","lightbox","gallery","loadMore","renderGallery","images","image","createImageCard","SimpleLightbox","updateGallery","onLoadMore","showLoader","hideLoader","cardHeight","loader","clearGallery","searchForm","input","event"],"mappings":"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"}